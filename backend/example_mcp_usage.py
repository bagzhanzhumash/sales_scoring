#!/usr/bin/env python3
"""
Example usage of the MCP (Model Context Protocol) Jira integration.
This demonstrates how to interact with the MCP server for creating Jira tickets.
"""

import asyncio
import json
from datetime import datetime
from typing import Dict, Any

import httpx


# Base URL for the MCP server
MCP_BASE_URL = "http://localhost:8000/mcp"

# Example call summary data
EXAMPLE_CALL_SUMMARY = {
    "callSummary": {
        "category": "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã",
        "purpose": "–ö–ª–∏–µ–Ω—Ç –û–û–û –†–æ—Å–ò–Ω–≤–µ—Å—Ç –æ–±—Å—É–∂–¥–∞–µ—Ç —É—Å–ª–æ–≤–∏—è –∏ —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –ø–æ —Å–¥–µ–ª–∫–µ",
        "discussionPoints": [
            "–ö–ª–∏–µ–Ω—Ç: –ò–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–∫–ª–∞–¥–∞ —Å —Ä–æ–±–æ—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏",
            "–ú–µ–Ω–µ–¥–∂–µ—Ä: –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π WMS",
            "–ö–ª–∏–µ–Ω—Ç: –ö–∞–∫–∏–µ —Å—Ä–æ–∫–∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞?"
        ],
        "actionItems": [
            "–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–∫–ª–∞–¥–∞",
            "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ç–æ—á–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤",
            "–ù–∞–∑–Ω–∞—á–∏—Ç—å –≤—Å—Ç—Ä–µ—á—É —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–µ"
        ],
        "decisionMade": "–ö–ª–∏–µ–Ω—Ç –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω, –∂–¥–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–æ –∫–æ–Ω—Ü–∞ –Ω–µ–¥–µ–ª–∏",
        "createdAt": datetime.now().strftime("%d.%m.%Y"),
        "managerRecommendations": [
            "–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ —à–∞–≥–∞: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ",
            "–°—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ –±—Ä–∏—Ñ –∫ —Å–ª–µ–¥—É—é—â–µ–π –≤—Å—Ç—Ä–µ—á–µ —Å –∫–ª—é—á–µ–≤—ã–º–∏ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∏ –ø–ª–∞–Ω–æ–º –æ—Ç–≤–µ—Ç–æ–≤",
            "–û–±–Ω–æ–≤–∏—Ç–µ CRM, —á—Ç–æ–±—ã –∫–æ–º–∞–Ω–¥–∞ –≤–∏–¥–µ–ª–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏",
            "–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ next best action: –Ω–∞–∑–Ω–∞—á—å—Ç–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–≤–æ–Ω–æ–∫ –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –ö–ü",
            "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π –Ω–∞—Å—Ç—Ä–æ–π, —á—Ç–æ–±—ã –∑–∞–∫—Ä–µ–ø–∏—Ç—å –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç—å –∏ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å —Ü–∏–∫–ª —Å–¥–µ–ª–∫–∏",
            "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç—å –ø–∏—Å—å–º–æ–º: –ö–ª–∏–µ–Ω—Ç –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω, –∂–¥–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è"
        ]
    },
    "sentiment": {
        "overall": "–ü–æ–∑–∏—Ç–∏–≤–Ω–æ–µ",
        "tone": ["–£–≤–µ—Ä–µ–Ω–Ω—ã–π", "–î—Ä—É–∂–µ–ª—é–±–Ω—ã–π"],
        "drivers": [
            "–ö–ª–∏–µ–Ω—Ç –∞–∫—Ç–∏–≤–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç—Å—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º",
            "–ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —á–µ—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã",
            "–û–±–µ —Å—Ç–æ—Ä–æ–Ω—ã –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω—ã –≤ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–∏ –¥–∏–∞–ª–æ–≥–∞"
        ],
        "recommendations": [
            "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏ –ø–∏—Å—å–º–æ–º",
            "–ù–∞–∑–Ω–∞—á—å—Ç–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Å–æ–∑–≤–æ–Ω –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤"
        ]
    },
    "scorecards": [
        {
            "title": "–í—ã—è–≤–ª–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π",
            "score": 4.5,
            "target": 5,
            "description": "–ú–µ–Ω–µ–¥–∂–µ—Ä —É—Å–ø–µ—à–Ω–æ –≤—ã—è–≤–∏–ª –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–∫–ª–∞–¥–∞"
        },
        {
            "title": "–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–µ—à–µ–Ω–∏—è",
            "score": 4.2,
            "target": 5,
            "description": "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Ö–æ—Ä–æ—à–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–ø—Ä–æ—Å–∞–º –∫–ª–∏–µ–Ω—Ç–∞"
        },
        {
            "title": "–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏",
            "score": 4.8,
            "target": 5,
            "description": "–ß–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏"
        }
    ]
}


async def call_mcp_tool(tool_name: str, arguments: Dict[str, Any]) -> Dict[str, Any]:
    """Call an MCP tool with the specified arguments.
    
    Args:
        tool_name: Name of the MCP tool to call
        arguments: Dictionary of arguments to pass to the tool
        
    Returns:
        Dict with the tool response
    """
    mcp_request = {
        "jsonrpc": "2.0",
        "id": 1,
        "method": "tools/call",
        "params": {
            "name": tool_name,
            "arguments": arguments
        }
    }
    
    async with httpx.AsyncClient() as client:
        response = await client.post(
            f"{MCP_BASE_URL}/tools/call",
            json=mcp_request,
            headers={"Content-Type": "application/json"},
            timeout=30.0
        )
        return response.json()


async def list_mcp_tools() -> Dict[str, Any]:
    """List all available MCP tools."""
    mcp_request = {
        "jsonrpc": "2.0",
        "id": 1,
        "method": "tools/list"
    }
    
    async with httpx.AsyncClient() as client:
        response = await client.post(
            f"{MCP_BASE_URL}/tools/list",
            json=mcp_request,
            headers={"Content-Type": "application/json"},
            timeout=10.0
        )
        return response.json()


async def check_mcp_jira_health() -> Dict[str, Any]:
    """Check Jira health using MCP tool."""
    print("üîç Checking Jira health via MCP...")
    
    try:
        result = await call_mcp_tool("check_jira_health", {})
        
        if "result" in result:
            health_data = result["result"]
            print(f"   ‚úÖ Health check result: {health_data}")
            return health_data
        else:
            print(f"   ‚ùå Error in health check: {result}")
            return result
            
    except Exception as e:
        print(f"   ‚ùå Exception during health check: {e}")
        return {"error": str(e)}


async def create_single_ticket_mcp() -> Dict[str, Any]:
    """Create a single ticket using MCP tool."""
    print("üé´ Creating single ticket via MCP...")
    
    ticket_args = {
        "summary": "–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –û–û–û –†–æ—Å–ò–Ω–≤–µ—Å—Ç",
        "description": """
–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–∫–ª–∞–¥–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ –û–û–û –†–æ—Å–ò–Ω–≤–µ—Å—Ç.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –†–æ–±–æ—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã —Å–∫–ª–∞–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WMS —Å–∏—Å—Ç–µ–º–æ–π
- –†–∞—Å—á–µ—Ç –ø–æ–ª–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–æ–∫–æ–≤ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
–ö–ª–∏–µ–Ω—Ç –∞–∫—Ç–∏–≤–Ω–æ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω –≤ —Ä–µ—à–µ–Ω–∏–∏.
–û–∂–∏–¥–∞–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–æ –∫–æ–Ω—Ü–∞ –Ω–µ–¥–µ–ª–∏.
–ü–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –Ω–∞ –∑–≤–æ–Ω–∫–µ.

**–°–æ–∑–¥–∞–Ω–æ –∏–∑ MCP –∞–Ω–∞–ª–∏–∑–∞ –∑–≤–æ–Ω–∫–∞**
        """.strip(),
        "issue_type": "Task",
        "priority": "High",
        "labels": ["mcp-created", "call-analysis", "client-rosinvest"]
    }
    
    try:
        result = await call_mcp_tool("create_jira_ticket", ticket_args)
        
        if "result" in result:
            ticket_data = result["result"]
            if ticket_data.get("success"):
                print(f"   ‚úÖ Created ticket: {ticket_data.get('ticket_key')}")
                print(f"   üîó URL: {ticket_data.get('ticket_url')}")
                return ticket_data
            else:
                print(f"   ‚ùå Failed to create ticket: {ticket_data.get('error')}")
                return ticket_data
        else:
            print(f"   ‚ùå Error in ticket creation: {result}")
            return result
            
    except Exception as e:
        print(f"   ‚ùå Exception during ticket creation: {e}")
        return {"error": str(e)}


async def create_tickets_from_summary_mcp() -> Dict[str, Any]:
    """Create tickets from call summary using MCP tool."""
    print("üìã Creating tickets from call summary via MCP...")
    
    summary_args = {
        "call_summary": EXAMPLE_CALL_SUMMARY,
        "client_name": "–û–û–û –†–æ—Å–ò–Ω–≤–µ—Å—Ç",
        "assignee": None  # Will use default
    }
    
    try:
        result = await call_mcp_tool("create_tickets_from_call_summary", summary_args)
        
        if "result" in result:
            tickets_data = result["result"]
            if tickets_data.get("success"):
                tickets_count = tickets_data.get("tickets_count", 0)
                print(f"   ‚úÖ Created {tickets_count} tickets from {tickets_data.get('total_recommendations')} recommendations")
                
                for ticket in tickets_data.get("tickets_created", []):
                    print(f"   üìã {ticket['ticket_key']}: {ticket['summary'][:60]}...")
                    print(f"      üîó {ticket['ticket_url']}")
                
                return tickets_data
            else:
                print(f"   ‚ùå Failed to create tickets: {tickets_data.get('error')}")
                return tickets_data
        else:
            print(f"   ‚ùå Error in tickets creation: {result}")
            return result
            
    except Exception as e:
        print(f"   ‚ùå Exception during tickets creation: {e}")
        return {"error": str(e)}


async def analyze_recommendations_mcp() -> Dict[str, Any]:
    """Analyze call recommendations without creating tickets using MCP tool."""
    print("üîç Analyzing call recommendations via MCP...")
    
    analysis_args = {
        "call_summary": EXAMPLE_CALL_SUMMARY,
        "client_name": "–û–û–û –†–æ—Å–ò–Ω–≤–µ—Å—Ç"
    }
    
    try:
        result = await call_mcp_tool("analyze_call_recommendations", analysis_args)
        
        if "result" in result:
            analysis_data = result["result"]
            if analysis_data.get("success"):
                recommendations = analysis_data.get("recommendations", [])
                print(f"   ‚úÖ Analyzed {len(recommendations)} recommendations:")
                
                for rec in recommendations:
                    print(f"   üìù {rec['type']}: {rec['content'][:50]}... (Priority: {rec['priority']})")
                
                print(f"   üé≠ Sentiment: {analysis_data.get('call_sentiment')}")
                print(f"   üìä Category: {analysis_data.get('call_category')}")
                
                return analysis_data
            else:
                print(f"   ‚ùå Failed to analyze: {analysis_data.get('error')}")
                return analysis_data
        else:
            print(f"   ‚ùå Error in analysis: {result}")
            return result
            
    except Exception as e:
        print(f"   ‚ùå Exception during analysis: {e}")
        return {"error": str(e)}


async def get_jira_config_mcp() -> Dict[str, Any]:
    """Get Jira configuration using MCP tool."""
    print("‚öôÔ∏è Getting Jira configuration via MCP...")
    
    try:
        result = await call_mcp_tool("get_jira_config", {})
        
        if "result" in result:
            config_data = result["result"]
            print(f"   ‚úÖ Configuration: {config_data}")
            return config_data
        else:
            print(f"   ‚ùå Error getting config: {result}")
            return result
            
    except Exception as e:
        print(f"   ‚ùå Exception getting config: {e}")
        return {"error": str(e)}


async def generate_sample_data_mcp() -> Dict[str, Any]:
    """Generate sample call summary using MCP tool."""
    print("üé≤ Generating sample call summary via MCP...")
    
    try:
        result = await call_mcp_tool("generate_sample_call_summary", {})
        
        if "result" in result:
            sample_data = result["result"]
            if sample_data.get("success"):
                print("   ‚úÖ Generated sample call summary for testing")
                return sample_data
            else:
                print(f"   ‚ùå Failed to generate sample: {sample_data}")
                return sample_data
        else:
            print(f"   ‚ùå Error generating sample: {result}")
            return result
            
    except Exception as e:
        print(f"   ‚ùå Exception generating sample: {e}")
        return {"error": str(e)}


async def list_available_tools() -> Dict[str, Any]:
    """List all available MCP tools."""
    print("üõ†Ô∏è Listing available MCP tools...")
    
    try:
        result = await list_mcp_tools()
        
        if "result" in result:
            tools = result["result"].get("tools", [])
            print(f"   ‚úÖ Found {len(tools)} available tools:")
            
            for tool in tools:
                print(f"   üîß {tool['name']}: {tool['description']}")
            
            return result
        else:
            print(f"   ‚ùå Error listing tools: {result}")
            return result
            
    except Exception as e:
        print(f"   ‚ùå Exception listing tools: {e}")
        return {"error": str(e)}


async def main():
    """Main example function demonstrating MCP integration."""
    print("üöÄ MCP (Model Context Protocol) Jira Integration Example")
    print("=" * 60)
    
    # List available tools
    print("\n1. Discovering MCP Tools...")
    await list_available_tools()
    
    # Check Jira health
    print("\n2. Checking Jira Health...")
    health_result = await check_mcp_jira_health()
    
    if not health_result.get("enabled"):
        print("\n‚ö†Ô∏è  Jira integration is disabled. Enable it to test ticket creation.")
        print("   Set JIRA_ENABLED=true in your .env file")
        return
    
    if not health_result.get("configured"):
        print("\n‚ö†Ô∏è  Jira integration is not properly configured.")
        print("   Check the required environment variables:")
        print("   - JIRA_BASE_URL, JIRA_USERNAME, JIRA_API_TOKEN, JIRA_PROJECT_KEY")
        return
    
    # Get configuration
    print("\n3. Getting Jira Configuration...")
    await get_jira_config_mcp()
    
    # Analyze recommendations
    print("\n4. Analyzing Call Recommendations...")
    await analyze_recommendations_mcp()
    
    # Create single ticket
    print("\n5. Creating Single Ticket...")
    await create_single_ticket_mcp()
    
    # Create tickets from summary
    print("\n6. Creating Tickets from Call Summary...")
    await create_tickets_from_summary_mcp()
    
    # Generate sample data
    print("\n7. Generating Sample Data...")
    await generate_sample_data_mcp()
    
    print("\nüéâ MCP Integration Example Completed!")
    print("\nüìñ What's Different About MCP:")
    print("   ‚Ä¢ Standardized protocol for AI-tool interaction")
    print("   ‚Ä¢ Tools are discoverable and self-describing")
    print("   ‚Ä¢ AI agents can call tools directly without custom APIs")
    print("   ‚Ä¢ Schema validation and error handling built-in")
    print("   ‚Ä¢ Server-sent events for real-time communication")
    
    print("\nüîß Available MCP Tools:")
    print("   ‚Ä¢ check_jira_health - Check integration status")
    print("   ‚Ä¢ create_jira_ticket - Create individual tickets")
    print("   ‚Ä¢ create_tickets_from_call_summary - Batch ticket creation")
    print("   ‚Ä¢ analyze_call_recommendations - Preview recommendations")
    print("   ‚Ä¢ get_jira_config - Get configuration info")
    print("   ‚Ä¢ generate_sample_call_summary - Generate test data")


def print_mcp_curl_examples():
    """Print cURL examples for MCP integration."""
    print("\nüì° MCP cURL Examples:")
    print("=" * 50)
    
    print("\n1. List available tools:")
    print(f"""curl -X POST {MCP_BASE_URL}/tools/list \\
  -H "Content-Type: application/json" \\
  -d '{{"jsonrpc": "2.0", "id": 1, "method": "tools/list"}}'""")
    
    print("\n2. Check Jira health:")
    print(f"""curl -X POST {MCP_BASE_URL}/tools/call \\
  -H "Content-Type: application/json" \\
  -d '{{"jsonrpc": "2.0", "id": 1, "method": "tools/call", "params": {{"name": "check_jira_health", "arguments": {{}}}}}}'""")
    
    print("\n3. Create single ticket:")
    create_ticket_payload = {
        "jsonrpc": "2.0",
        "id": 1,
        "method": "tools/call",
        "params": {
            "name": "create_jira_ticket",
            "arguments": {
                "summary": "Test ticket from MCP",
                "description": "This is a test ticket created via MCP",
                "priority": "Medium"
            }
        }
    }
    print(f"""curl -X POST {MCP_BASE_URL}/tools/call \\
  -H "Content-Type: application/json" \\
  -d '{json.dumps(create_ticket_payload, ensure_ascii=False)}'""")
    
    print("\n4. Analyze call recommendations:")
    analyze_payload = {
        "jsonrpc": "2.0",
        "id": 1,
        "method": "tools/call",
        "params": {
            "name": "analyze_call_recommendations",
            "arguments": {
                "call_summary": EXAMPLE_CALL_SUMMARY,
                "client_name": "Test Client"
            }
        }
    }
    print(f"""curl -X POST {MCP_BASE_URL}/tools/call \\
  -H "Content-Type: application/json" \\
  -d '{json.dumps(analyze_payload, ensure_ascii=False, indent=2)}'""")


if __name__ == "__main__":
    import sys
    
    if len(sys.argv) > 1 and sys.argv[1] == "curl":
        print_mcp_curl_examples()
    else:
        print("Starting MCP example...")
        print("(Use 'python example_mcp_usage.py curl' for cURL examples)")
        asyncio.run(main())
